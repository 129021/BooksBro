{"version":3,"file":"js/621.e55ee100.js","mappings":"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","sources":["webpack://my_vue3_project/./src/network/order.js","webpack://my_vue3_project/./src/components/common/navbar/NavBar.vue","webpack://my_vue3_project/./src/components/common/navbar/NavBar.vue?c028","webpack://my_vue3_project/./src/views/order/Order.vue","webpack://my_vue3_project/./src/views/order/Order.vue?5152"],"sourcesContent":["import {\r\n    request\r\n} from './request';\r\n\r\n\r\n// 创建订单\r\nexport function createOrder(params) {\r\n    return request({\r\n        url: \"/api/orders\",\r\n        method: 'post',\r\n        params,\r\n    })\r\n}\r\n// 获取订单预览\r\nexport function getOrderPreview() {\r\n    return request({\r\n        url: \"/api/orders/preview\",\r\n        method: 'get',\r\n\r\n    })\r\n}\r\n// 支付订单\r\nexport function payOrder(order, params) {\r\n    return request({\r\n        url: `/api/orders/${order}/pay`,\r\n        method: 'get',\r\n        params,\r\n    })\r\n}\r\n// 查询支付状态\r\nexport function getPayStatus(order) {\r\n    return request({\r\n        url: `/api/orders/${order}/status`,\r\n        method: 'get',\r\n\r\n    })\r\n}\r\n// 获取订单列表 params:page, title,status,include\r\nexport function getOrderList(params) {\r\n    return request({\r\n        url: \"/api/orders\",\r\n        method: 'get',\r\n        params,\r\n    })\r\n}\r\n// 订单详情params:include\r\nexport function getOrderDetail(order) {\r\n    return request({\r\n        url: `/api/orders/${order}`,\r\n        method: 'get',\r\n        params: {\r\n            include: 'orderDetails.goods,address,user'\r\n        }\r\n    })\r\n}\r\n\r\n\r\n// 确认收货\r\n// /api/orders/{order}/confirm\r\nexport function confirmOrder(order) {\r\n    return request({\r\n        url: `/api/orders/${order}/confirm`,\r\n        method: 'patch',\r\n    })\r\n}\r\n\r\n// 物流详情\r\nexport function expressDetail(order) {\r\n    return request({\r\n        url: `/api/orders/${order}/express`,\r\n        method: 'get',\r\n    })\r\n}\r\n\r\n\r\n","<template>\r\n  <div class=\"nav-bar\">\r\n    <div class=\"left\" @click=\"goback\">\r\n      <slot name=\"left\">\r\n        <img src=\"~assets/images/left.png\" alt=\"\" />\r\n      </slot>\r\n    </div>\r\n    <div class=\"center\">\r\n      <slot>default</slot>\r\n    </div>\r\n    <div class=\"right\">\r\n      <slot name=\"right\"></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from \"vue-router\";\r\nexport default {\r\n  name: \"NavBar\",\r\n\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    const goback = () => {\r\n      //   console.log(\"goback\");\r\n      //   router.go(delta:-1);\r\n      router.go(-1);\r\n    };\r\n\r\n    return {\r\n      goback,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style  scoped>\r\n.nav-bar {\r\n  background-color: var(--color-tint);\r\n  color: #fff;\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  z-index: 9;\r\n  height: 45px;\r\n  line-height: 45px;\r\n  text-align: center;\r\n  box-shadow: 0 2px 0 rgba(100, 100, 100, 0.1);\r\n  display: flex;\r\n}\r\n\r\n.left,\r\n.right {\r\n  width: 60px;\r\n}\r\n\r\n.left img {\r\n  width: 45px;\r\n  height: 45px;\r\n  padding: 13px;\r\n}\r\n.nav-bar .center {\r\n  flex: 1;\r\n  /* background-color: red; */\r\n}\r\n</style>","import { render } from \"./NavBar.vue?vue&type=template&id=22cb7b90&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=22cb7b90&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\wangj\\\\Desktop\\\\vue3_project\\\\my_vue3_project-master\\\\BooksBro\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-22cb7b90\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"order-box\">\r\n    <nav-bar class=\"nav-bar\">\r\n      <template v-slot:default> 定单列表 </template>\r\n    </nav-bar>\r\n\r\n    <van-tabs ref=\"tabs\" @click=\"onChangeTab\" class=\"order-tab\">\r\n      <van-tab title=\"全部\"></van-tab>\r\n      <van-tab title=\"待付款\"></van-tab>\r\n      <van-tab title=\"已支付\"></van-tab>\r\n      <van-tab title=\"发货\"></van-tab>\r\n      <van-tab title=\"交易完成\"></van-tab>\r\n      <van-tab title=\"过期\"></van-tab>\r\n    </van-tabs>\r\n    <div class=\"content\">\r\n      <van-pull-refresh\r\n        v-model=\"refreshing\"\r\n        @refresh=\"onRefresh\"\r\n        class=\"order-list-refresh\"\r\n      >\r\n        <van-list\r\n          v-model:loading=\"loading\"\r\n          :finished=\"finished\"\r\n          finished-text=\"没有更多了\"\r\n          @load=\"onLoad\"\r\n          @offset=\"10\"\r\n        >\r\n          <div\r\n            @click=\"goTo(item.id)\"\r\n            class=\"order-item-box\"\r\n            v-for=\"(item, index) in list\"\r\n            :key=\"index\"\r\n          >\r\n            <div class=\"order-item-header\">\r\n              <span style=\"line-height: 30px\"\r\n                >订单号：{{ item.order_no }} <br />\r\n                创建时间：{{ item.created_at }}</span\r\n              >\r\n            </div>\r\n            <van-card\r\n              v-for=\"sub in item.orderDetails.data\"\r\n              :key=\"sub.id\"\r\n              :num=\"sub.num\"\r\n              :price=\"sub.goods.price\"\r\n              desc=\"全场包邮\"\r\n              :title=\"sub.goods.title\"\r\n              :thumb=\"sub.goods.cover_url\"\r\n            />\r\n          </div>\r\n        </van-list>\r\n      </van-pull-refresh>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, toRefs, onMounted } from \"vue\";\r\nimport NavBar from \"components/common/navbar/NavBar\";\r\nimport { getOrderList } from \"network/order\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"Order\",\r\n  components: {\r\n    NavBar,\r\n  },\r\n  setup() {\r\n    /*\r\n    List 组件通过 loading 和 finished 两个变量控制加载状态，\r\n    当组件滚动到底部时，会触发 load 事件并将 loading 设置成 true。\r\n    此时可以发起异步操作并更新数据，数据更新完毕后，将 loading 设置成 false 即可。\r\n    若数据已全部加载完毕，则直接将 finished 设置成 true 即可。\r\n     */\r\n\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n    let tabs = ref(null);\r\n    const state = reactive({\r\n      loading: false,\r\n      finished: false,\r\n      refreshing: false,\r\n      list: [],\r\n      page: 1,\r\n      totalPage: 0,\r\n      status: 0,\r\n    });\r\n\r\n    onMounted(() => {\r\n      onRefresh(); // 初使化\r\n    });\r\n\r\n    const loadData = () => {\r\n      getOrderList({\r\n        page: state.page,\r\n        status: state.status,\r\n        include: \"orderDetails.goods\",\r\n      }).then((res) => {\r\n        state.list = state.list.concat(res.data.data);\r\n        state.loading = false;\r\n\r\n        console.log(state.page + \"################\");\r\n\r\n        state.totalPage = res.data.meta.pagination.total_pages;\r\n\r\n        if (state.page >= state.totalPage) {\r\n          state.finished = true;\r\n        }\r\n      });\r\n    };\r\n\r\n    const onLoad = () => {\r\n      if (!state.refreshing && state.page < state.totalPage) {\r\n        state.page = state.page + 1;\r\n      }\r\n\r\n      if (state.refreshing) {\r\n        state.list = [];\r\n        state.refreshing = false;\r\n      }\r\n\r\n      loadData();\r\n    };\r\n\r\n    const onRefresh = () => {\r\n      // 是否处于加载状态，加载过程中不触发load事件\r\n      state.refreshing = true;\r\n      // 清空列表数据\r\n      state.finished = false;\r\n      // 重新加载数据\r\n      // 将 loading 设置为 true，表示处于加载状态\r\n      state.loading = true;\r\n\r\n      state.page = 1;\r\n\r\n      onLoad();\r\n    };\r\n\r\n    // tab 切换\r\n    const onChangeTab = (name) => {\r\n      state.status = name;\r\n      onRefresh();\r\n    };\r\n\r\n    // 到订单详情页\r\n    const goTo = (id) => {\r\n      router.push({ path: \"/orderdetail\", query: { id } });\r\n    };\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      onLoad,\r\n      onRefresh,\r\n      tabs,\r\n      onChangeTab,\r\n      goTo,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.order-box {\r\n  text-align: left;\r\n}\r\n.order-box .order-header {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 10000;\r\n  width: 100%;\r\n  height: 44px;\r\n  line-height: 44px;\r\n  padding: 0 10px;\r\n  color: #252525;\r\n  background: #fff;\r\n  border-bottom: 1px solid #dcdcdc;\r\n}\r\n.order-box .order-name {\r\n  font-size: 14px;\r\n}\r\n.order-tab {\r\n  margin-top: 44px;\r\n  position: fixed;\r\n  left: 0;\r\n  z-index: 1000;\r\n  width: 100%;\r\n  border-bottom: 1px solid #e9e9e9;\r\n}\r\n\r\n.content {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  overflow-y: scroll;\r\n  padding-top: 100px;\r\n}\r\n\r\n.van-card__content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n.van-pull-refresh__head {\r\n  background: #f9f9f9;\r\n}\r\n\r\n.order-item-box {\r\n  margin: 20px 10px;\r\n  background-color: #fafafa;\r\n}\r\n.order-item-header {\r\n  padding: 10px 20px 0 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.van-card {\r\n  background-color: #ffffff;\r\n  border-radius: 3px;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n                                                                                                                          ","import { render } from \"./Order.vue?vue&type=template&id=683dead9&scoped=true\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=683dead9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\wangj\\\\Desktop\\\\vue3_project\\\\my_vue3_project-master\\\\BooksBro\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-683dead9\"]])\n\nexport default __exports__"],"names":["createOrder","params","request","url","method","getOrderPreview","payOrder","order","getPayStatus","getOrderList","getOrderDetail","include","confirmOrder","class","_createElementVNode","src","_imports_0","alt","_createElementBlock","onClick","$setup","_renderSlot","_ctx","_hoisted_2","undefined","name","setup","router","useRouter","goback","go","__exports__","render","style","_createVNode","_component_nav_bar","default","_component_van_tabs","ref","_component_van_tab","title","_component_van_pull_refresh","$event","onRefresh","_component_van_list","loading","finished","onLoad","onOffset","_Fragment","_renderList","item","index","id","key","_toDisplayString","order_no","_hoisted_7","created_at","orderDetails","data","sub","_createBlock","_component_van_card","num","price","goods","desc","thumb","cover_url","components","NavBar","useRoute","tabs","state","reactive","refreshing","list","page","totalPage","status","onMounted","loadData","then","res","concat","console","log","meta","pagination","total_pages","onChangeTab","goTo","push","path","query","toRefs"],"sourceRoot":""}