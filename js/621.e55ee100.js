"use strict";(self["webpackChunkmy_vue3_project"]=self["webpackChunkmy_vue3_project"]||[]).push([[621],{771:function(e,t,n){n.d(t,{Fw:function(){return d},LV:function(){return r},LX:function(){return s},Nc:function(){return u},_r:function(){return i},dz:function(){return l},jo:function(){return o}});var a=n(7707);function r(e){return(0,a.W)({url:"/api/orders",method:"post",params:e})}function o(){return(0,a.W)({url:"/api/orders/preview",method:"get"})}function i(e,t){return(0,a.W)({url:`/api/orders/${e}/pay`,method:"get",params:t})}function s(e){return(0,a.W)({url:`/api/orders/${e}/status`,method:"get"})}function d(e){return(0,a.W)({url:"/api/orders",method:"get",params:e})}function l(e){return(0,a.W)({url:`/api/orders/${e}`,method:"get",params:{include:"orderDetails.goods,address,user"}})}function u(e){return(0,a.W)({url:`/api/orders/${e}/confirm`,method:"patch"})}},920:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(3396),r=n(2291);const o=e=>((0,a.dD)("data-v-22cb7b90"),e=e(),(0,a.Cn)(),e),i={class:"nav-bar"},s=o((()=>(0,a._)("img",{src:r,alt:""},null,-1))),d={class:"center"},l=(0,a.Uk)("default"),u={class:"right"};function c(e,t,n,r,o,c){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",{class:"left",onClick:t[0]||(t[0]=(...e)=>r.goback&&r.goback(...e))},[(0,a.WI)(e.$slots,"left",{},(()=>[s]),!0)]),(0,a._)("div",d,[(0,a.WI)(e.$slots,"default",{},(()=>[l]),!0)]),(0,a._)("div",u,[(0,a.WI)(e.$slots,"right",{},void 0,!0)])])}var g=n(678),f={name:"NavBar",setup(){const e=(0,g.tv)(),t=()=>{e.go(-1)};return{goback:t}}},p=n(89);const h=(0,p.Z)(f,[["render",c],["__scopeId","data-v-22cb7b90"]]);var m=h},4621:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(3396),r=n(7139);const o=e=>((0,a.dD)("data-v-683dead9"),e=e(),(0,a.Cn)(),e),i={class:"order-box"},s=(0,a.Uk)(" 定单列表 "),d={class:"content"},l=["onClick"],u={class:"order-item-header"},c={style:{"line-height":"30px"}},g=o((()=>(0,a._)("br",null,null,-1)));function f(e,t,n,o,f,p){const h=(0,a.up)("nav-bar"),m=(0,a.up)("van-tab"),v=(0,a.up)("van-tabs"),A=(0,a.up)("van-card"),k=(0,a.up)("van-list"),b=(0,a.up)("van-pull-refresh");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(h,{class:"nav-bar"},{default:(0,a.w5)((()=>[s])),_:1}),(0,a.Wm)(v,{ref:"tabs",onClick:o.onChangeTab,class:"order-tab"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{title:"全部"}),(0,a.Wm)(m,{title:"待付款"}),(0,a.Wm)(m,{title:"已支付"}),(0,a.Wm)(m,{title:"发货"}),(0,a.Wm)(m,{title:"交易完成"}),(0,a.Wm)(m,{title:"过期"})])),_:1},8,["onClick"]),(0,a._)("div",d,[(0,a.Wm)(b,{modelValue:e.refreshing,"onUpdate:modelValue":t[1]||(t[1]=t=>e.refreshing=t),onRefresh:o.onRefresh,class:"order-list-refresh"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{loading:e.loading,"onUpdate:loading":t[0]||(t[0]=t=>e.loading=t),finished:e.finished,"finished-text":"没有更多了",onLoad:o.onLoad,onOffset:e=>10},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.list,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{onClick:t=>o.goTo(e.id),class:"order-item-box",key:t},[(0,a._)("div",u,[(0,a._)("span",c,[(0,a.Uk)("订单号："+(0,r.zw)(e.order_no)+" ",1),g,(0,a.Uk)(" 创建时间："+(0,r.zw)(e.created_at),1)])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.orderDetails.data,(e=>((0,a.wg)(),(0,a.j4)(A,{key:e.id,num:e.num,price:e.goods.price,desc:"全场包邮",title:e.goods.title,thumb:e.goods.cover_url},null,8,["num","price","title","thumb"])))),128))],8,l)))),128))])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["modelValue","onRefresh"])])])}var p=n(4870),h=n(920),m=n(771),v=n(678),A={name:"Order",components:{NavBar:h.Z},setup(){const e=(0,v.tv)();(0,v.yj)();let t=(0,p.iH)(null);const n=(0,p.qj)({loading:!1,finished:!1,refreshing:!1,list:[],page:1,totalPage:0,status:0});(0,a.bv)((()=>{i()}));const r=()=>{(0,m.Fw)({page:n.page,status:n.status,include:"orderDetails.goods"}).then((e=>{n.list=n.list.concat(e.data.data),n.loading=!1,console.log(n.page+"################"),n.totalPage=e.data.meta.pagination.total_pages,n.page>=n.totalPage&&(n.finished=!0)}))},o=()=>{!n.refreshing&&n.page<n.totalPage&&(n.page=n.page+1),n.refreshing&&(n.list=[],n.refreshing=!1),r()},i=()=>{n.refreshing=!0,n.finished=!1,n.loading=!0,n.page=1,o()},s=e=>{n.status=e,i()},d=t=>{e.push({path:"/orderdetail",query:{id:t}})};return{...(0,p.BK)(n),onLoad:o,onRefresh:i,tabs:t,onChangeTab:s,goTo:d}}},k=n(89);const b=(0,k.Z)(A,[["render",f],["__scopeId","data-v-683dead9"]]);var w=b},2291:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABk0lEQVRoQ+2Z3UYFURSA1/c8dVcv0H23iYiIiIiIiH5ERMQhIiIi0kPUfd3Vk/QAO5s5HJmzW2f/tbZm7saZGd+31p519lqDNH7QOL8MAn+dwSED/y4DzrkTEVkWkS8ReQX8efRRdQl18McTtJ/AfDS9SL0q1APvud+BRfMCU+A996n5JRSAPwLOUqLv7y36DgTgD4HzVPiiAgH4A+AiB3wxgQD8PnCZC76IgHPOl8m+2r4HXOWEzy4QgN8FRrnhswoE4HeA6xLw2QQC8NvATSn4LAIB+C3gtiR8skCg2mwCd6XhkwQC8BvAfQ34aIEA/DrwUAs+SiAAvwY81oSPFfgQkbkfoKvAU234WIE3EVloWcBvEya7qrFLG0vI0zb9Eo/D3XQZVUjY/yNTSNjfSigk7G/mFBL2t9MKCfsNjULCfkupkLDf1Csk7I9VFBL2B1sKCfujRYWE/eHuLxLtfB+Ysot9AZZSGqGi0+k+sG4Ms9L99mz++0BKdDX3Vs+ABmqWawaBWaJV4tohAyWiOsszvwGAjbUxED2S5gAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=621.e55ee100.js.map