"use strict";(self["webpackChunkmy_vue3_project"]=self["webpackChunkmy_vue3_project"]||[]).push([[313],{920:function(e,t,l){l.d(t,{Z:function(){return v}});var a=l(3396),o=l(2291);const s=e=>((0,a.dD)("data-v-22cb7b90"),e=e(),(0,a.Cn)(),e),n={class:"nav-bar"},c=s((()=>(0,a._)("img",{src:o,alt:""},null,-1))),i={class:"center"},d=(0,a.Uk)("default"),r={class:"right"};function u(e,t,l,o,s,u){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",{class:"left",onClick:t[0]||(t[0]=(...e)=>o.goback&&o.goback(...e))},[(0,a.WI)(e.$slots,"left",{},(()=>[c]),!0)]),(0,a._)("div",i,[(0,a.WI)(e.$slots,"default",{},(()=>[d]),!0)]),(0,a._)("div",r,[(0,a.WI)(e.$slots,"right",{},void 0,!0)])])}var g=l(678),k={name:"NavBar",setup(){const e=(0,g.tv)(),t=()=>{e.go(-1)};return{goback:t}}},m=l(89);const p=(0,m.Z)(k,[["render",u],["__scopeId","data-v-22cb7b90"]]);var v=p},5313:function(e,t,l){l.r(t),l.d(t,{default:function(){return x}});var a=l(3396),o=l(7139),s=l(4107);const n=e=>((0,a.dD)("data-v-08ea8d51"),e=e(),(0,a.Cn)(),e),c=(0,a.Uk)(" 购物车("),i={style:{color:"red"}},d=(0,a.Uk)(") "),r={class:"cart-box"},u={class:"cart-body"},g={class:"good-item"},k={class:"good-img"},m=["src"],p={class:"good-desc"},v={class:"good-title"},h={class:"good-btn"},A={class:"price"},f=n((()=>(0,a._)("small",null,"¥",-1))),C=(0,a.Uk)("全选"),b={key:0,class:"empty"},_=n((()=>(0,a._)("img",{class:"empty-cart",src:s,alt:"空购物车"},null,-1))),w=n((()=>(0,a._)("div",{class:"title"},"购物车空空如也",-1))),U=(0,a.Uk)("前往选购");function W(e,t,l,s,n,W){const y=(0,a.up)("nav-bar"),B=(0,a.up)("van-checkbox"),D=(0,a.up)("van-stepper"),S=(0,a.up)("van-button"),E=(0,a.up)("van-swipe-cell"),I=(0,a.up)("van-checkbox-group"),Z=(0,a.up)("van-submit-bar");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(y,{class:"nav-bar"},{default:(0,a.w5)((()=>[c,(0,a._)("span",i,(0,o.zw)(e.$store.state.cartCount),1),d])),_:1}),(0,a._)("div",r,[(0,a._)("div",u,[(0,a.Wm)(I,{ref:"checkboxGroup",onChange:s.groupChange,modelValue:e.result,"onUpdate:modelValue":t[0]||(t[0]=t=>e.result=t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.list,((e,t)=>((0,a.wg)(),(0,a.j4)(E,{"right-width":50,key:t},{right:(0,a.w5)((()=>[(0,a.Wm)(S,{square:"",icon:"delete",type:"danger",class:"delete-button",onClick:t=>s.deleteGood(e.id)},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a.Wm)(B,{name:e.id},null,8,["name"]),(0,a._)("div",k,[(0,a._)("img",{src:e.goods.cover_url,alt:""},null,8,m)]),(0,a._)("div",p,[(0,a._)("div",v,[(0,a._)("span",null,(0,o.zw)(e.goods.title),1),(0,a._)("span",null,"x"+(0,o.zw)(e.goods.stock),1)]),(0,a._)("div",h,[(0,a._)("div",A,[f,(0,a.Uk)((0,o.zw)(e.goods.price+".00"),1)]),(0,a.Wm)(D,{class:"stepper",integer:"",min:1,max:e.goods.stock,"model-value":e.num,name:e.id,"async-change":"",onChange:s.onChange},null,8,["max","model-value","name","onChange"])])])])])),_:2},1024)))),128))])),_:1},8,["onChange","modelValue"])]),(0,a.Wm)(Z,{class:"submit-all",price:100*s.total,onSubmit:s.onSubmit,"button-text":"结算"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{onClick:s.allCheck,checked:e.checkAll,"onUpdate:checked":t[1]||(t[1]=t=>e.checkAll=t)},{default:(0,a.w5)((()=>[C])),_:1},8,["onClick","checked"])])),_:1},8,["price","onSubmit"]),e.list.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",b,[_,w,(0,a.Wm)(S,{round:"",color:"#1baeae",type:"primary",block:"",onClick:s.goTo},{default:(0,a.w5)((()=>[U])),_:1},8,["onClick"])]))])])}l(6743);var y=l(4691),B=l(4870),D=l(678),S=l(65),E=l(9862),I=l(920),Z={name:"ShopCart",setup(){const e=(0,D.tv)(),t=(0,S.oR)(),l=(0,B.qj)({list:[],result:[],checkAll:!0}),o=()=>{y.Z.loading({message:"加载中...",forbidClick:!0}),(0,E.dv)("include=goods").then((e=>{l.list=e.data.data,console.log(e.data),l.result=e.data.data.filter((e=>1==e.is_checked)).map((e=>e.id)),y.Z.clear()}))};(0,a.bv)((()=>{o()}));const s=(0,a.Fl)((()=>{let e=0;return l.list.filter((e=>l.result.includes(e.id))).forEach((t=>{e+=parseInt(t.num)*parseFloat(t.goods.price)})),e})),n=(e,t)=>{y.Z.loading({message:"修改中...",forbidClick:!0}),(0,E.qi)(t.name,{num:e}).then((a=>{l.list.forEach((l=>{l.id==t.name&&(l.num=e)})),y.Z.clear()}))},c=e=>{e.length==l.list.length?l.checkAll=!0:l.checkAll=!1,l.result=e,(0,E.rk)({cart_ids:e})},i=()=>{l.checkAll?(l.result=[],l.checkAll=!1):(l.result=l.list.map((e=>e.id)),l.checkAll=!0)},d=()=>{e.push({path:"/home"})},r=e=>{(0,E.GR)(e).then((e=>{o(),t.dispatch("updateCart")}))},u=()=>{0!=l.result.length?e.push({path:"/createorder"}):y.Z.fail("请选择商品进行结算")};return{...(0,B.BK)(l),goTo:d,onChange:n,groupChange:c,allCheck:i,deleteGood:r,total:s,onSubmit:u}},components:{NavBar:I.Z}},Q=l(89);const R=(0,Q.Z)(Z,[["render",W],["__scopeId","data-v-08ea8d51"]]);var x=R},4107:function(e,t,l){e.exports=l.p+"img/empty-car.d16f8118.png"},2291:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABk0lEQVRoQ+2Z3UYFURSA1/c8dVcv0H23iYiIiIiIiH5ERMQhIiIi0kPUfd3Vk/QAO5s5HJmzW2f/tbZm7saZGd+31p519lqDNH7QOL8MAn+dwSED/y4DzrkTEVkWkS8ReQX8efRRdQl18McTtJ/AfDS9SL0q1APvud+BRfMCU+A996n5JRSAPwLOUqLv7y36DgTgD4HzVPiiAgH4A+AiB3wxgQD8PnCZC76IgHPOl8m+2r4HXOWEzy4QgN8FRrnhswoE4HeA6xLw2QQC8NvATSn4LAIB+C3gtiR8skCg2mwCd6XhkwQC8BvAfQ34aIEA/DrwUAs+SiAAvwY81oSPFfgQkbkfoKvAU234WIE3EVloWcBvEya7qrFLG0vI0zb9Eo/D3XQZVUjY/yNTSNjfSigk7G/mFBL2t9MKCfsNjULCfkupkLDf1Csk7I9VFBL2B1sKCfujRYWE/eHuLxLtfB+Ysot9AZZSGqGi0+k+sG4Ms9L99mz++0BKdDX3Vs+ABmqWawaBWaJV4tohAyWiOsszvwGAjbUxED2S5gAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=313.008d0c7a.js.map