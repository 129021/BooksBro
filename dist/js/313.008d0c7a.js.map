{"version":3,"file":"js/313.008d0c7a.js","mappings":"mPACOA,MAAM,W,UAGLC,EAAAA,EAAAA,GAA4C,OAAvCC,IAAAC,EAA8BC,IAAI,IAAvC,W,GAGCJ,MAAM,U,WACH,W,GAEHA,MAAM,S,0CATbK,EAAAA,EAAAA,IAYM,MAZN,EAYM,EAXJJ,EAAAA,EAAAA,GAIM,OAJDD,MAAM,OAAQM,QAAK,oBAAEC,EAAAA,QAAAA,EAAAA,UAAAA,KAA1B,EACEC,EAAAA,EAAAA,IAEOC,EAAAA,OAAA,WAFP,IAEO,CADLC,KADF,MAIFT,EAAAA,EAAAA,GAEM,MAFN,EAEM,EADJO,EAAAA,EAAAA,IAAoBC,EAAAA,OAAA,cAApB,IAAoB,MAApB,MAEFR,EAAAA,EAAAA,GAEM,MAFN,EAEM,EADJO,EAAAA,EAAAA,IAA0BC,EAAAA,OAAA,gBAAAE,GAAA,O,aAOhC,GACEC,KAAM,SAENC,QACE,MAAMC,GAASC,EAAAA,EAAAA,MAETC,EAAS,KAGbF,EAAOG,IAAI,IAGb,MAAO,CACLD,OAAAA,K,QCxBN,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,S,2KCN+B,S,GACbC,MAAA,e,WAAwD,M,GAGjEpB,MAAM,Y,GACJA,MAAM,a,GAWAA,MAAM,a,GAEJA,MAAM,Y,aAGNA,MAAM,a,GACJA,MAAM,c,GAINA,MAAM,Y,GACJA,MAAM,S,UACTC,EAAAA,EAAAA,GAAgB,aAAT,KAAC,K,WAmCjB,M,SAGAD,MAAM,S,UACTC,EAAAA,EAAAA,GAIE,OAHAD,MAAM,aACNE,IAAAC,EACAC,IAAI,QAHN,W,UAKAH,EAAAA,EAAAA,GAAgC,OAA3BD,MAAM,SAAQ,WAAO,K,WAEvB,Q,+OA5ETK,EAAAA,EAAAA,IAgFM,aA/EJgB,EAAAA,EAAAA,IAIUC,EAAA,CAJDtB,MAAM,WAAS,CACLuB,SAAO,SAAC,IACnB,WAA8D,OAA9D,GAA8DC,EAAAA,EAAAA,IAAjCf,EAAAA,OAAOgB,MAAMC,WAAS,GAAnD,K,OAGRzB,EAAAA,EAAAA,GAyEM,MAzEN,EAyEM,EAxEJA,EAAAA,EAAAA,GAkDM,MAlDN,EAkDM,EAjDJoB,EAAAA,EAAAA,IAgDqBM,EAAA,CA/CnBC,IAAI,gBACHC,SAAQtB,EAAAA,Y,WACAE,EAAAA,O,qCAAAA,EAAAA,OAAMqB,IAHjB,C,kBAOI,IAA6B,gBAF/BzB,EAAAA,EAAAA,IA0CiB0B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAxCSvB,EAAAA,MAAI,CAApBwB,EAAMC,M,WAFhBC,EAAAA,EAAAA,IA0CiBC,EAAA,CAzCd,cAAa,GAEbC,IAAKH,GAHR,CAiCaI,OAAK,SACd,IAME,EANFjB,EAAAA,EAAAA,IAMEkB,EAAA,CALAC,OAAA,GACAC,KAAK,SACLC,KAAK,SACL1C,MAAM,gBACLM,QAAK,GAAEC,EAAAA,WAAW0B,EAAKU,KAL1B,uB,kBA7BF,IA2BM,EA3BN1C,EAAAA,EAAAA,GA2BM,MA3BN,EA2BM,EA1BJoB,EAAAA,EAAAA,IAAgCuB,EAAA,CAAjBhC,KAAMqB,EAAKU,IAA1B,kBACA1C,EAAAA,EAAAA,GAEM,MAFN,EAEM,EADJA,EAAAA,EAAAA,GAA0C,OAApCC,IAAK+B,EAAKY,MAAMC,UAAW1C,IAAI,IAArC,aAEFH,EAAAA,EAAAA,GAqBM,MArBN,EAqBM,EApBJA,EAAAA,EAAAA,GAGM,MAHN,EAGM,EAFJA,EAAAA,EAAAA,GAAmC,aAAAuB,EAAAA,EAAAA,IAA1BS,EAAKY,MAAME,OAAK,IACzB9C,EAAAA,EAAAA,GAAoC,YAA9B,KAACuB,EAAAA,EAAAA,IAAGS,EAAKY,MAAMG,OAAK,MAE5B/C,EAAAA,EAAAA,GAeM,MAfN,EAeM,EAdJA,EAAAA,EAAAA,GAEM,MAFN,EAEM,CADJgD,GACI,iBADehB,EAAKY,MAAMK,MAAK,aAGrC7B,EAAAA,EAAAA,IASE8B,EAAA,CARAnD,MAAM,UACNoD,QAAA,GACCC,IAAK,EACLC,IAAKrB,EAAKY,MAAMG,MAChB,cAAaf,EAAKsB,IAClB3C,KAAMqB,EAAKU,GACZ,kBACCd,SAAQtB,EAAAA,UARX,yD,KApBR,kB,KALF,gCAkDFc,EAAAA,EAAAA,IASiBmC,EAAA,CARfxD,MAAM,aACLkD,MAAY,IAAL3C,EAAAA,MACPkD,SAAQlD,EAAAA,SACT,cAAY,MAJd,C,kBAME,IAEC,EAFDc,EAAAA,EAAAA,IAECuB,EAAA,CAFctC,QAAOC,EAAAA,SAAkBmD,QAASjD,EAAAA,S,kCAAAA,EAAAA,SAAQqB,IAAzD,C,kBACG,IAAE,M,KADL,4B,KANF,wBAU0BrB,EAAAA,KAAKkD,QAA/B,iBAA+BA,EAAAA,EAAAA,OAA/BtD,EAAAA,EAAAA,IAUM,MAVN,EAUM,CATJuD,EAKAC,GACAxC,EAAAA,EAAAA,IAECkB,EAAA,CAFWuB,MAAA,GAAMC,MAAM,UAAUrB,KAAK,UAAUsB,MAAA,GAAO1D,QAAOC,EAAAA,MAA/D,C,kBACG,IAAI,M,KADP,sB,oEAeR,GACEK,KAAM,WACNC,QACE,MAAMC,GAASC,EAAAA,EAAAA,MACTkD,GAAQC,EAAAA,EAAAA,MAGRzC,GAAQ0C,EAAAA,EAAAA,IAAS,CACrBC,KAAM,GACNC,OAAQ,GACRC,UAAU,IAINC,EAAO,KACX,YAAc,CAAEC,QAAS,SAAUC,aAAa,KAEhDC,EAAAA,EAAAA,IAAQ,iBAAiBC,MAAMC,IAE7BnD,EAAM2C,KAAOQ,EAAIC,KAAKA,KACtBC,QAAQC,IAAIH,EAAIC,MAEhBpD,EAAM4C,OAASO,EAAIC,KAAKA,KACrBG,QAAQC,GAAsB,GAAhBA,EAAEC,aAChBC,KAAKlD,GAASA,EAAKU,KAEtB,iBAIJyC,EAAAA,EAAAA,KAAU,KACRb,OAGF,MAAMc,GAAQC,EAAAA,EAAAA,KAAS,KACrB,IAAIC,EAAM,EAQV,OANA9D,EAAM2C,KACHY,QAAQ/C,GAASR,EAAM4C,OAAOmB,SAASvD,EAAKU,MAC5C8C,SAASxD,IACRsD,GAAOG,SAASzD,EAAKsB,KAAOoC,WAAW1D,EAAKY,MAAMK,UAG/CqC,KAIH1D,EAAW,CAAC+D,EAAOC,KACvB,YAAc,CAAErB,QAAS,SAAUC,aAAa,KAEhDqB,EAAAA,EAAAA,IAAWD,EAAOjF,KAAM,CAAE2C,IAAKqC,IAASjB,MAAMC,IAE5CnD,EAAM2C,KAAKqB,SAASxD,IACdA,EAAKU,IAAMkD,EAAOjF,OACpBqB,EAAKsB,IAAMqC,MAIf,gBAKEG,EAAe1B,IACfA,EAAOV,QAAUlC,EAAM2C,KAAKT,OAC9BlC,EAAM6C,UAAW,EAEjB7C,EAAM6C,UAAW,EAKnB7C,EAAM4C,OAASA,GAEf2B,EAAAA,EAAAA,IAAY,CAAEC,SAAU5B,KAGpB6B,EAAW,KACVzE,EAAM6C,UAIT7C,EAAM4C,OAAS,GACf5C,EAAM6C,UAAW,IAJjB7C,EAAM4C,OAAS5C,EAAM2C,KAAKe,KAAKlD,GAASA,EAAKU,KAC7ClB,EAAM6C,UAAW,IAQf6B,EAAO,KACXrF,EAAOsF,KAAK,CAAEC,KAAM,WAIhBC,EAAc3D,KAClB4D,EAAAA,EAAAA,IAAe5D,GAAIgC,MAAMC,IACvBL,IACAN,EAAMuC,SAAS,kBAKb/C,EAAW,KACY,GAAvBhC,EAAM4C,OAAOV,OAIf7C,EAAOsF,KAAK,CAAEC,KAAM,iBAHpB,SAAW,cAOf,MAAO,KACFI,EAAAA,EAAAA,IAAOhF,GACV0E,KAAAA,EACAtE,SAAAA,EACAkE,YAAAA,EACAG,SAAAA,EACAI,WAAAA,EACAjB,MAAAA,EACA5B,SAAAA,IAIJiD,WAAY,CACVC,OAAAA,EAAAA,I,QC9MJ,MAAMzF,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,S","sources":["webpack://my_vue3_project/./src/components/common/navbar/NavBar.vue","webpack://my_vue3_project/./src/components/common/navbar/NavBar.vue?c028","webpack://my_vue3_project/./src/views/shopcart/Shopcart.vue","webpack://my_vue3_project/./src/views/shopcart/Shopcart.vue?faae"],"sourcesContent":["<template>\r\n  <div class=\"nav-bar\">\r\n    <div class=\"left\" @click=\"goback\">\r\n      <slot name=\"left\">\r\n        <img src=\"~assets/images/left.png\" alt=\"\" />\r\n      </slot>\r\n    </div>\r\n    <div class=\"center\">\r\n      <slot>default</slot>\r\n    </div>\r\n    <div class=\"right\">\r\n      <slot name=\"right\"></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from \"vue-router\";\r\nexport default {\r\n  name: \"NavBar\",\r\n\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    const goback = () => {\r\n      //   console.log(\"goback\");\r\n      //   router.go(delta:-1);\r\n      router.go(-1);\r\n    };\r\n\r\n    return {\r\n      goback,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style  scoped>\r\n.nav-bar {\r\n  background-color: var(--color-tint);\r\n  color: #fff;\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  z-index: 9;\r\n  height: 45px;\r\n  line-height: 45px;\r\n  text-align: center;\r\n  box-shadow: 0 2px 0 rgba(100, 100, 100, 0.1);\r\n  display: flex;\r\n}\r\n\r\n.left,\r\n.right {\r\n  width: 60px;\r\n}\r\n\r\n.left img {\r\n  width: 45px;\r\n  height: 45px;\r\n  padding: 13px;\r\n}\r\n.nav-bar .center {\r\n  flex: 1;\r\n  /* background-color: red; */\r\n}\r\n</style>","import { render } from \"./NavBar.vue?vue&type=template&id=22cb7b90&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=22cb7b90&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\wangj\\\\Desktop\\\\vue3_project\\\\my_vue3_project-master\\\\BooksBro\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-22cb7b90\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <nav-bar class=\"nav-bar\">\r\n      <template v-slot:default>\r\n        购物车(<span style=\"color: red\"> {{ $store.state.cartCount }} </span>)\r\n      </template>\r\n    </nav-bar>\r\n    <div class=\"cart-box\">\r\n      <div class=\"cart-body\">\r\n        <van-checkbox-group\r\n          ref=\"checkboxGroup\"\r\n          @change=\"groupChange\"\r\n          v-model=\"result\"\r\n        >\r\n          <van-swipe-cell\r\n            :right-width=\"50\"\r\n            v-for=\"(item, index) in list\"\r\n            :key=\"index\"\r\n          >\r\n            <div class=\"good-item\">\r\n              <van-checkbox :name=\"item.id\" />\r\n              <div class=\"good-img\">\r\n                <img :src=\"item.goods.cover_url\" alt=\"\" />\r\n              </div>\r\n              <div class=\"good-desc\">\r\n                <div class=\"good-title\">\r\n                  <span>{{ item.goods.title }}</span>\r\n                  <span>x{{ item.goods.stock }}</span>\r\n                </div>\r\n                <div class=\"good-btn\">\r\n                  <div class=\"price\">\r\n                    <small>¥</small>{{ item.goods.price + \".00\" }}\r\n                  </div>\r\n\r\n                  <van-stepper\r\n                    class=\"stepper\"\r\n                    integer\r\n                    :min=\"1\"\r\n                    :max=\"item.goods.stock\"\r\n                    :model-value=\"item.num\"\r\n                    :name=\"item.id\"\r\n                    async-change\r\n                    @change=\"onChange\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <template #right>\r\n              <van-button\r\n                square\r\n                icon=\"delete\"\r\n                type=\"danger\"\r\n                class=\"delete-button\"\r\n                @click=\"deleteGood(item.id)\"\r\n              />\r\n            </template>\r\n          </van-swipe-cell>\r\n        </van-checkbox-group>\r\n      </div>\r\n      <van-submit-bar\r\n        class=\"submit-all\"\r\n        :price=\"total * 100\"\r\n        @submit=\"onSubmit\"\r\n        button-text=\"结算\"\r\n      >\r\n        <van-checkbox @click=\"allCheck\" v-model:checked=\"checkAll\" \r\n          >全选</van-checkbox\r\n        >\r\n      </van-submit-bar>\r\n      <div class=\"empty\" v-if=\"!list.length\">\r\n        <img\r\n          class=\"empty-cart\"\r\n          src=\"~assets/images/empty-car.png\"\r\n          alt=\"空购物车\"\r\n        />\r\n        <div class=\"title\">购物车空空如也</div>\r\n        <van-button round color=\"#1baeae\" type=\"primary\" block @click=\"goTo\"\r\n          >前往选购</van-button\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, toRefs, onMounted, computed } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport { getCart, deleteCartItem, checkedCart, modifyCart } from \"network/cart\";\r\nimport { Toast } from \"vant\";\r\nimport NavBar from \"components/common/navbar/NavBar\";\r\nexport default {\r\n  name: \"ShopCart\",\r\n  setup() {\r\n    const router = useRouter();\r\n    const store = useStore();\r\n\r\n    // 数据模型， 状态\r\n    const state = reactive({\r\n      list: [],\r\n      result: [], //id数组\r\n      checkAll: true,\r\n    });\r\n\r\n    // 初始化购物车数据\r\n    const init = () => {\r\n      Toast.loading({ message: \"加载中...\", forbidClick: true });\r\n\r\n      getCart(\"include=goods\").then((res) => {\r\n        // console.log('初始化的购物车数据是：'+res);\r\n        state.list = res.data.data;\r\n        console.log(res.data);\r\n\r\n        state.result = res.data.data\r\n          .filter((n) => n.is_checked == 1)\r\n          .map((item) => item.id);\r\n\r\n        Toast.clear();\r\n      });\r\n    };\r\n\r\n    onMounted(() => {\r\n      init();\r\n    });\r\n    // 通过计算属性 计算总价\r\n    const total = computed(() => {\r\n      let sum = 0;\r\n\r\n      state.list\r\n        .filter((item) => state.result.includes(item.id))\r\n        .forEach((item) => {\r\n          sum += parseInt(item.num) * parseFloat(item.goods.price);\r\n        });\r\n\r\n      return sum;\r\n    });\r\n\r\n    // 异步改变购物车数量\r\n    const onChange = (value, detail) => {\r\n      Toast.loading({ message: \"修改中...\", forbidClick: true });\r\n\r\n      modifyCart(detail.name, { num: value }).then((res) => {\r\n        //将在onMounted中的list中的num也要改\r\n        state.list.forEach((item) => {\r\n          if (item.id == detail.name) {\r\n            item.num = value;\r\n          }\r\n        });\r\n\r\n        Toast.clear();\r\n      });\r\n    };\r\n\r\n    // 复选框改变处理\r\n    const groupChange = (result) => {\r\n      if (result.length == state.list.length) {\r\n        state.checkAll = true;\r\n      } else {\r\n        state.checkAll = false;\r\n      }\r\n\r\n      // console.log(result);\r\n\r\n      state.result = result;\r\n      // 改变数据表中选中状态\r\n      checkedCart({ cart_ids: result });\r\n    };\r\n\r\n    const allCheck = () => {\r\n      if (!state.checkAll) {\r\n        state.result = state.list.map((item) => item.id);\r\n        state.checkAll = true;\r\n      } else {\r\n        state.result = [];\r\n        state.checkAll = false;\r\n      }\r\n    };\r\n\r\n    // 前往购物\r\n    const goTo = () => {\r\n      router.push({ path: \"/home\" });\r\n    };\r\n\r\n    // 删除商品\r\n    const deleteGood = (id) => {\r\n      deleteCartItem(id).then((res) => {\r\n        init(); //重新初始化\r\n        store.dispatch(\"updateCart\"); //改变vuex中的状态数量\r\n      });\r\n    };\r\n\r\n    // 创建定单\r\n    const onSubmit = () => {\r\n      if (state.result.length == 0) {\r\n        Toast.fail(\"请选择商品进行结算\");\r\n        return;\r\n      } else {\r\n        router.push({ path: \"/createorder\" });\r\n      }\r\n    };\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      goTo,\r\n      onChange,\r\n      groupChange,\r\n      allCheck,\r\n      deleteGood,\r\n      total,\r\n      onSubmit,\r\n    };\r\n  },\r\n\r\n  components: {\r\n    NavBar,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped >\r\n.cart-body {\r\n  margin: 60px 0 100px 0;\r\n  padding-left: 10px;\r\n}\r\n.good-item {\r\n  display: flex;\r\n}\r\n.good-img img {\r\n  width: 80px;\r\n  height: auto;\r\n}\r\n.good-desc {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  flex: 1;\r\n  padding: 10px;\r\n}\r\n.good-title {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.good-btn {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.price {\r\n  font-size: 16px;\r\n  color: red;\r\n  line-height: 28px;\r\n}\r\n\r\n.delete-button {\r\n  width: 50px;\r\n  height: 100%;\r\n}\r\n.empty {\r\n  width: 50%;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  margin-top: 200px;\r\n}\r\n.empty-cart {\r\n  width: 150px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.title {\r\n  font-size: 16px;\r\n  margin-bottom: 20px;\r\n}\r\n.submit-all {\r\n  margin-bottom: 60px;\r\n}\r\n</style>\r\n\r\n<style>\r\n.van-icon-smile-o {\r\n  font-size: 50px;\r\n}\r\n.van-checkbox {\r\n  margin-left: 0px;\r\n}\r\n.van-submit-bar__text {\r\n  margin-right: 10px;\r\n}\r\n.van-submit-bar__button {\r\n  background: red;\r\n}\r\n.van-checkbox__icon--checked .van-icon {\r\n  background-color: red;\r\n  border-color: red;\r\n}\r\n.van-icon-delete {\r\n  font-size: 20px;\r\n  margin-top: 4px;\r\n}\r\n</style>","import { render } from \"./Shopcart.vue?vue&type=template&id=08ea8d51&scoped=true\"\nimport script from \"./Shopcart.vue?vue&type=script&lang=js\"\nexport * from \"./Shopcart.vue?vue&type=script&lang=js\"\n\nimport \"./Shopcart.vue?vue&type=style&index=0&id=08ea8d51&scoped=true&lang=css\"\nimport \"./Shopcart.vue?vue&type=style&index=1&id=08ea8d51&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\wangj\\\\Desktop\\\\vue3_project\\\\my_vue3_project-master\\\\BooksBro\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-08ea8d51\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","alt","_createElementBlock","onClick","$setup","_renderSlot","_ctx","_hoisted_2","undefined","name","setup","router","useRouter","goback","go","__exports__","render","style","_createVNode","_component_nav_bar","default","_toDisplayString","state","cartCount","_component_van_checkbox_group","ref","onChange","$event","_Fragment","_renderList","item","index","_createBlock","_component_van_swipe_cell","key","right","_component_van_button","square","icon","type","id","_component_van_checkbox","goods","cover_url","title","stock","_hoisted_13","price","_component_van_stepper","integer","min","max","num","_component_van_submit_bar","onSubmit","checked","length","_hoisted_16","_hoisted_17","round","color","block","store","useStore","reactive","list","result","checkAll","init","message","forbidClick","getCart","then","res","data","console","log","filter","n","is_checked","map","onMounted","total","computed","sum","includes","forEach","parseInt","parseFloat","value","detail","modifyCart","groupChange","checkedCart","cart_ids","allCheck","goTo","push","path","deleteGood","deleteCartItem","dispatch","toRefs","components","NavBar"],"sourceRoot":""}