"use strict";(self["webpackChunkmy_vue3_project"]=self["webpackChunkmy_vue3_project"]||[]).push([[736],{2762:function(e,t,n){n.d(t,{Z:function(){return y}});var o=n(3396);const a={class:"goods"};function l(e,t,n,l,s,r){const i=(0,o.up)("GoodsListItem");return(0,o.wg)(),(0,o.iD)("div",a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.goods,((e,t)=>((0,o.wg)(),(0,o.j4)(i,{key:e,product:e},null,8,["product"])))),128))])}var s=n(7139);const r=e=>((0,o.dD)("data-v-2d860f26"),e=e(),(0,o.Cn)(),e),i={alt:""},c={class:"goods-info"},d={class:"price"},u=r((()=>(0,o._)("small",null,"$",-1))),p={class:"collect"};function m(e,t,n,a,l,r){const m=(0,o.Q2)("lazy");return(0,o.wg)(),(0,o.iD)("div",{class:"goods-list-item",onClick:t[0]||(t[0]=(...e)=>a.itemClick&&a.itemClick(...e))},[(0,o.wy)((0,o._)("img",i,null,512),[[m,n.product.cover_url]]),(0,o._)("div",c,[(0,o._)("p",null,(0,s.zw)(n.product.title),1),(0,o._)("span",d,[u,(0,o.Uk)((0,s.zw)(n.product.price),1)]),(0,o._)("span",p,(0,s.zw)(n.product.collects_count),1)])])}var v=n(678),g={name:"GoodsListItem",props:{product:Object,default(){return{}}},setup(e){const t=(0,v.tv)(),n=()=>{t.push({path:"/detail",query:{id:e.product.id}})};return{itemClick:n}}},w=n(89);const b=(0,w.Z)(g,[["render",m],["__scopeId","data-v-2d860f26"]]);var _=b,f={name:"GoodsList",props:{goods:{type:Array,default(){return[]}}},components:{GoodsListItem:_}};const k=(0,w.Z)(f,[["render",l],["__scopeId","data-v-e41a1ef0"]]);var y=k},6515:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var o=n(3396),a=n(9242);const l={id:"home"},s=(0,o.Uk)(" 图书兄弟 "),r={class:"wrapper"},i={class:"content"},c={ref:"banref"};function d(e,t,n,d,u,p){const m=(0,o.up)("nav-bar"),v=(0,o.up)("tab-control"),g=(0,o.up)("home-swiper"),w=(0,o.up)("recommend"),b=(0,o.up)("GoodsList"),_=(0,o.up)("back-top");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[s])),_:1}),(0,o.wy)((0,o.Wm)(v,{titles:["畅销","新书","精选"],onTabClick:d.tabClick},null,8,["onTabClick"]),[[a.F8,d.isTabFixed]]),(0,o._)("div",r,[(0,o._)("div",i,[(0,o._)("div",c,[(0,o.Wm)(g,{banners:d.banners},null,8,["banners"]),(0,o.Wm)(w,{recommends:d.recommends},null,8,["recommends"])],512),(0,o.Wm)(v,{titles:["畅销","新书","精选"],onTabClick:d.tabClick},null,8,["onTabClick"]),(0,o.Wm)(b,{goods:d.showGoods},null,8,["goods"])])]),(0,o.wy)((0,o.Wm)(_,{onBTop:d.bTop},null,8,["onBTop"]),[[a.F8,d.isTabFixed]])])}var u=n(920),p=n(7139);const m={class:"recommend"},v=["onClick"],g={alt:""};function w(e,t,n,l,s,r){const i=(0,o.Q2)("lazy");return(0,o.wg)(),(0,o.iD)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.recommends.slice(0,4),((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"recommend-item",key:e.id},[(0,o._)("a",{href:"",onClick:(0,a.iM)((t=>l.goDetail(e.id)),["prevent"])},[(0,o.wy)((0,o._)("img",g,null,512),[[i,e.cover_url]]),(0,o._)("div",null,(0,p.zw)(e.title),1)],8,v)])))),128))])}var b=n(678),_={name:"Recommend",props:{recommends:{type:Array,default(){return[]}}},setup(){const e=(0,b.tv)(),t=t=>{e.push({path:"/detail",query:{id:t}})};return{goDetail:t}}},f=n(89);const k=(0,f.Z)(_,[["render",w],["__scopeId","data-v-640466aa"]]);var y=k;const h={class:"tab-control"},C=["onClick"];function T(e,t,n,a,l,s){return(0,o.wg)(),(0,o.iD)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.titles,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,p.C_)(["tab-control-item",{active:t==a.currentIndex}]),key:t,onClick:e=>a.itemClick(t)},[(0,o._)("span",null,(0,p.zw)(e),1)],10,C)))),128))])}var H=n(4870),D={name:"TabControl",props:{titles:{type:Array,default:[]}},setup(e,{emit:t}){let n=(0,H.iH)(0);const o=e=>{n.value=e,t("tabClick",e)};return{currentIndex:n,itemClick:o}}};const I=(0,f.Z)(D,[["render",T],["__scopeId","data-v-6b6e80db"]]);var Z=I,W=n(7368),j=n(7707);function z(){return(0,j.W)({url:"/api/index"})}function G(e="sales",t=1){return(0,j.W)({url:"/api/index?"+e+"=1&page="+t})}var x=n(2762),L=n(5031);const q={class:"bannerImg",alt:""};function F(e,t,n,a,l,s){const r=(0,o.up)("van-swipe-item"),i=(0,o.up)("van-swipe"),c=(0,o.Q2)("lazy");return n.banners.length?((0,o.wg)(),(0,o.j4)(i,{key:0,class:"my-swipe",autoplay:3e3,"indicator-color":"white"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.banners,((e,t)=>((0,o.wg)(),(0,o.j4)(r,{key:t},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("img",q,null,512),[[c,e.img_url]])])),_:2},1024)))),128))])),_:1})):(0,o.kq)("",!0)}var Y={name:"HomeSwiper",props:{banners:Array,default(){return[]}}};const U=(0,f.Z)(Y,[["render",F],["__scopeId","data-v-64639992"]]);var A=U,B={name:"Home",components:{NavBar:u.Z,Recommend:y,TabControl:Z,GoodsList:x.Z,BackTop:W.Z,HomeSwiper:A},methods:{},setup(){const e=(0,H.iH)([]);let t=(0,H.iH)(0);const n=(0,H.qj)({sales:{page:1,list:[]},recommend:{page:1,list:[]},new:{page:1,list:[]}});let a=(0,H.iH)("sales");const l=(0,o.Fl)((()=>n[a.value].list));let s=(0,H.qj)({}),r=(0,H.iH)(!1),i=(0,H.iH)(null),c=(0,H.iH)([]);(0,o.bv)((()=>{z().then((t=>{e.value=t.data.goods.data,c.value=t.data.slides})),G("sales").then((e=>{n.sales.list=e.data.goods.data})),G("recommend").then((e=>{n.recommend.list=e.data.goods.data})),G("new").then((e=>{n.new.list=e.data.goods.data})),s=new L.ZP(document.querySelector(".wrapper"),{probeType:3,click:!0,pullUpLoad:!0}),s.on("scroll",(e=>{r.value=-e.y>i.value.offsetHeight})),s.on("pullingUp",(()=>{console.log("上拉加载更多...");const e=n[a.value].page+1;console.log("当前类型:"+a.value+"当前页："+e),G(a.value,e).then((e=>{n[a.value].list.push(...e.data.goods.data),n[a.value].page+=1})),s.finishPullUp(),s.refresh()}))}));const d=e=>{t.value=e;let n=["sales","new","recommend"];a.value=n[e],(0,o.Y3)((()=>{s&&s.refresh()}))};(0,o.m0)((()=>{(0,o.Y3)((()=>{s&&s.refresh()}))}));const u=()=>{s.scrollTo(0,0,500)};return{recommends:e,temid:t,tabClick:d,goods:n,showGoods:l,isTabFixed:r,banref:i,bTop:u,banners:c}}};const K=(0,f.Z)(B,[["render",d],["__scopeId","data-v-7a99cc2b"]]);var Q=K}}]);
//# sourceMappingURL=736.9f6830e0.js.map